{% extends "base.html" %}

{% block content %}
<h2>Enrollment History: {{ student.first_name }} {{ student.last_name }}</h2>

<table border="1" cellpadding="8">
    <tr>
        <th>Session</th>
        <th>Class</th>
        <th>Section</th>
        <th>Roll No.</th>
        <th>Status</th>
        <th>Update</th>
    </tr>
    {% for enrollment in enrollments %}
    <tr>
        <td>{{ enrollment.academic_session.name }}</td>
        <td>{{ enrollment.school_class.name }}</td>
        <td>{{ enrollment.section.name }}</td>
        <td>{{ enrollment.roll_number|default:'-' }}</td>
        <td>{{ enrollment.status|title }}</td>
        <td>
            <form method="post" action="{% url 'enrollment_status_update' enrollment.id %}">
                {% csrf_token %}
                <select name="status">
                    <option value="active" {% if enrollment.status == 'active' %}selected{% endif %}>Active</option>
                    <option value="passed" {% if enrollment.status == 'passed' %}selected{% endif %}>Passed</option>
                    <option value="left" {% if enrollment.status == 'left' %}selected{% endif %}>Left</option>
                </select>
                <button type="submit">Save</button>
            </form>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6">No enrollments found.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
